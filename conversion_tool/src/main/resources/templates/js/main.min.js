$(document).ready(function(){function disableSubmit(){$("#submit_transform").prop('disabled',true);}function enableSubmit(){$("#submit_transform").prop('disabled',false);}function showLoader(){ var height=$('#main-inner').innerHeight();var img_margin=(height/2)-50;$(".loader").css({'height':height+"px"});$(".loader_img").css({'margin-top':img_margin+"px"});$(".loader").show();}function checkFiles(){var value_income=$("#incomesource").val();var value_outcome=$("#outcomesource").val();if(value_income!=""&&value_outcome!=""){enableSubmit();}}$("#google").click(function(){$('.google, #submit_transform').slideDown(300);$('.local').slideUp(300);disableSubmit();}); $("#local").click(function(){$('.google').slideUp(300);$('.local , #submit_transform').slideDown(300);disableSubmit();});$("#spreadsheet_link").change(function(){ var spreadsheet_link=$('#spreadsheet_link').val(); if(spreadsheet_link!=''){enableSubmit();}}); $('#submit_transform').click(function(){ event.preventDefault(); showLoader(); setTimeout(function(){ $('.source, .google, .local, #submit_transform, .loader').hide(); $('.success_notes').slideToggle('fast');if($('#google').is(':checked')){ var spreadsheet_link=$('#spreadsheet_link').val(); $('<iframe />',{name:'google-iframe',id:'google-iframe',src:spreadsheet_link}).appendTo('#iframe_holder'); $('#google-iframe').slideDown(300);}},3000);}); $('#income_location_btn').click(function(){$("#incomesource").click();}); $("#incomesource").change(function(){ var value_income=$("#incomesource").val(); document.getElementById("fakeincomesource").value=value_income; checkFiles();}); $('#outcome_location_btn').click(function(){$("#outcomesource").click();}); $("#outcomesource").change(function(){ var value_outcome=$("#outcomesource").val(); document.getElementById("fakeoutcomesource").value=value_outcome; checkFiles();});});